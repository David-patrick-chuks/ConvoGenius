Improve aiService.ts with async error handling
