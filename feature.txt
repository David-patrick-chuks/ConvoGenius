Update backend routes to use async/await consistently
