Refactor trainingWorker.ts to use worker threads
